# ============================================
# Firecrawl Monorepo Environment Variables
# ============================================
#
# This file documents all environment variables used across the monorepo.
# Copy this file to .env and update with your values.
#
# Services included:
# - Firecrawl API (Node.js)
# - MCP Server (Node.js)
# - Webhook Bridge (Python)
# - Web Interface (Next.js)
# - Shared Infrastructure (PostgreSQL, Redis, Playwright)

# -----------------
# Core Firecrawl API
# -----------------
HOST=0.0.0.0
FIRECRAWL_PORT=4300
FIRECRAWL_INTERNAL_PORT=3002
FIRECRAWL_API_URL=http://localhost:4300
FIRECRAWL_API_KEY=your-api-key-here

# Worker Configuration
WORKER_PORT=4301
EXTRACT_WORKER_PORT=4305
NUM_WORKERS_PER_QUEUE=6
WORKER_CONCURRENCY=4
SCRAPE_CONCURRENCY=6
RETRY_DELAY=3000
MAX_RETRIES=1

# System Resources
MAX_CPU=1.0
MAX_RAM=1.0

# -----------------
# Shared Infrastructure
# -----------------

# PostgreSQL
POSTGRES_USER=firecrawl
POSTGRES_PASSWORD=your-secure-password
POSTGRES_DB=firecrawl_db
POSTGRES_PORT=4304
NUQ_DATABASE_URL=postgres://${POSTGRES_USER}:${POSTGRES_PASSWORD}@firecrawl_db:5432/${POSTGRES_DB}

# Redis
REDIS_PORT=4303
REDIS_URL=redis://firecrawl_cache:6379
REDIS_RATE_LIMIT_URL=redis://firecrawl_cache:6379
BULL_AUTH_KEY=@

# Playwright
PLAYWRIGHT_PORT=4302
PLAYWRIGHT_MICROSERVICE_URL=http://firecrawl_playwright:3000/scrape
BLOCK_MEDIA=true

# -----------------
# MCP Server
# -----------------
# Port Configuration
PORT=3060

# Firecrawl Integration
FIRECRAWL_API_KEY=self-hosted-no-auth
FIRECRAWL_BASE_URL=http://firecrawl:3002

# LLM Provider Configuration (for extract feature)
LLM_PROVIDER=openai-compatible
LLM_API_BASE_URL=https://cli-api.tootie.tv/v1
LLM_MODEL=claude-haiku-4-5-20251001

# MCP Configuration
OPTIMIZE_FOR=cost
MCP_RESOURCE_STORAGE=memory
MCP_RESOURCE_TTL=86400
DEBUG=false

# Map Tool Configuration
MAP_DEFAULT_COUNTRY=US
MAP_DEFAULT_LANGUAGES=en-US
MAP_MAX_RESULTS_PER_PAGE=200

# -----------------
# Webhook Bridge (Search)
# -----------------
SEARCH_BRIDGE_HOST=0.0.0.0
SEARCH_BRIDGE_PORT=52100
SEARCH_BRIDGE_API_SECRET=your-webhook-api-secret
SEARCH_BRIDGE_WEBHOOK_SECRET=your-webhook-hmac-secret
SEARCH_BRIDGE_CORS_ORIGINS=http://localhost:3000

# Webhook Bridge - Redis
SEARCH_BRIDGE_REDIS_URL=redis://firecrawl_cache:6379

# Webhook Bridge - PostgreSQL
SEARCH_BRIDGE_DATABASE_URL=postgresql+asyncpg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@firecrawl_db:5432/${POSTGRES_DB}

# Webhook Bridge - Vector Store (Qdrant)
SEARCH_BRIDGE_QDRANT_URL=http://qdrant:6333
SEARCH_BRIDGE_QDRANT_COLLECTION=firecrawl_docs
SEARCH_BRIDGE_VECTOR_DIM=1024

# Webhook Bridge - Embeddings (TEI)
SEARCH_BRIDGE_TEI_URL=http://tei:80
SEARCH_BRIDGE_EMBEDDING_MODEL=Qwen/Qwen3-Embedding-0.6B

# Webhook Bridge - Chunking Configuration
SEARCH_BRIDGE_MAX_CHUNK_TOKENS=256
SEARCH_BRIDGE_CHUNK_OVERLAP_TOKENS=50

# Webhook Bridge - Search Configuration
SEARCH_BRIDGE_HYBRID_ALPHA=0.5
SEARCH_BRIDGE_BM25_K1=1.5
SEARCH_BRIDGE_BM25_B=0.75
SEARCH_BRIDGE_RRF_K=60

# Webhook Bridge - Logging
SEARCH_BRIDGE_LOG_LEVEL=INFO

# -----------------
# Search Index Integration
# -----------------
ENABLE_SEARCH_INDEX=true
SEARCH_SERVICE_URL=http://localhost:52100
SEARCH_SERVICE_API_SECRET=your-webhook-api-secret
SEARCH_INDEX_SAMPLE_RATE=1.0

# Webhook Configuration
SELF_HOSTED_WEBHOOK_URL=http://localhost:52100/api/webhook/firecrawl
SELF_HOSTED_WEBHOOK_HMAC_SECRET=your-webhook-hmac-secret

# -----------------
# Search Provider
# -----------------
SEARXNG_ENDPOINT=https://s.tootie.tv
SEARXNG_ENGINES=google,bing,duckduckgo,startpage,yandex
SEARXNG_CATEGORIES=general,images,videos,news,map,music,science

# -----------------
# LLM Configuration (Shared)
# -----------------
# OpenAI API (or compatible)
OPENAI_API_KEY=dummy
OPENAI_BASE_URL=https://cli-api.tootie.tv/v1
MODEL_NAME=claude-haiku-4-5-20251001

# Anthropic API
ANTHROPIC_API_KEY=your-anthropic-key

# -----------------
# Application Settings
# -----------------
USE_DB_AUTHENTICATION=false
LOGGING_LEVEL=INFO
